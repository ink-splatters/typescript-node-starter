import { ChatOpenAI } from "@langchain/openai";
import { ChatPromptTemplate } from "@langchain/core/prompts";
import { StringOutputParser } from "@langchain/core/output_parsers";

const outputParser = new StringOutputParser();

const prompt = ChatPromptTemplate.fromMessages([
  [
    "system",
    `You are a world class commentator. Provide a comprehensive summary of the user-given text.
  The summary should cover all the key points and main ideas presented in the original text, while also condensing the information into a concise and easy-to-understand format.
  Please remove all unnecessary details like analogies or metaphors and focus on the most important insights.
  The length of the summary should be roughly 1/3 of the original text or 50-100 words. Use a friendly and engaging tone to make the summary interesting and enjoyable to read.

  Separate the summary into paragraphs separated with the newline character \`\\n\` and group related ideas in the same paragraphs. Give each paragraphs a short title encapsulating the main idea of the given paragraph.

  Use the text metadata to help you write the summary. Write the summary in the same language as the original text.`,
  ],
  ["user", "{input}"],
]);

const chatModel = new ChatOpenAI({
  apiKey: process.env.OPENAI_API_KEY,
});

const llmChain = prompt.pipe(chatModel).pipe(outputParser);

export async function main() {
  const stream = await llmChain.stream({
    input: `
  I am writing this still from the hotel where MicroConf 2024 just wrapped up. I’m on the road in Atlanta, and I want to share my impressions from this conference and the things I learned, the things I’m taking home with me to work on my software as a service business, my media brand, and my involvement in the community. As usual, after two and a half days of MicroConf, my mind is overflowing with ideas, conversations I had with new friends and old friends, and reprioritized tasks that I’m taking home with me. This conference is something extremely special. I don’t think I’ve ever been at a conference that is so incredibly professional and heartwarmingly personal at the same time. MicroConf strikes the perfect balance between founders and entrepreneurs, teaching each other strategies and tactics for their business-building journeys and providing motivation and insights and the deep, relational connection between people who all have the same dream and who become friends while chasing that dream. It is incredible. I didn’t even finish checking into the hotel before I saw the first person I knew from the conference and just chatted with them. I couldn’t even reach the reception counter without being among my friends. From there, it was a whirlwind. In the elevator, every single time reliably, I would meet another founder who, instead of giving me an elevator pitch about their business, which tends to be how most conferences work, they’d just chat about something entrepreneurial or even something personal. We’re all on the same level, which you don’t see at most conferences. People who visit MicroConf come here as micro-entrepreneurs or small SaaS founders. It was pointed out during the initial presentation at the conference that almost 30% of people have a six-figure MRR. That’s quite substantial, and it should indicate a difference between people’s success levels, but you can’t see it; you won’t find it. Everybody is open to conversation with every single other person out there, no matter how far along the journey they are. I’ve met several very inspiring entrepreneurs, to whom this was the first MicroConf, who didn’t even know if they belonged here or not. But they very quickly noticed that they were embraced with the same level of respect and adoration as people who’ve come to this now 24th MicroConf dozens of times and running businesses that are the dream of those who come in for the first time. It is an incredible place and an incredible community to be in. And it’s almost remarkable to feel that, even though the talks and the workshops of this conference were powerful and insightful, to the point where you can’t even take notes fast and deep enough to capture the essence and the extent of how helpful these things are, the actual selling point of this conference has been, and will probably always be, the hallway track: the chats between founders, the chance exchanges, and the little deep-dives that happen between the talks and outside of the regular time slots. If I were to summarize it, I might have had 50-60 distinct five to ten-minute conversations around software service business topics of all kinds. Some revolved around my own projects, but most revolved around general concepts or other people’s projects, the challenges that they were facing—technical issues, business issues, customer issues, relationship issues, partnership issues, legal issues—all kinds of things, and people are incredibly open with them. People here are willing to share their fears, hopes, dreams, stumbling blocks, and barriers in their path just as much as they are eager to share their little tricks, tips, and strategies that helped them along the way. Resources and insights are easily and quickly shared. It is a family. I don’t use this term lightly because most things called family often have ulterior motives, but in this community, people are incredibly open, helpful, and supportive of their fellow founders. So, I’m going to quickly dive into what is likely my favorite kind of topic at these conferences, a talk by Dr. Sherry Walling, an interactive talk around a mental health issue, motivation, something that is highly relatable for every single founder—their source of motivation, the lack thereof, the things that kill it, and the things that rekindle it, and the reasons why we are motivated and the vectors that play into what things motivate us and what things don’t. It is always very noticeable that mental health has a substantial part in the MicroConf roster of talks. Not a single MicroConf goes by without a talk that either mentions this topic significantly or is centered on a mental health issue from the start. And in that lies, I think, the secret to why MicroConf is so successful. It does not just chip away at the surface; MicroConf tries to go very deep to the point where actual knowledge, when applied, can have a meaningful impact. So, the motivational talk was not a “motivational talk.” It was a talk about motivation — the psychological underpinnings of motivation, and it had several interactive components, which I really enjoyed. I was seated at a table with several of my Twitter friends and people I already knew (or thought I knew.) And it was fascinating to have a conversation with them during the talk for around 10 minutes or so about the things that motivate each of us. Dr. Walling presented a category of seven different archetypes from which people draw their motivation. One is the Craftsman, the maker, the person who just relishes in building a product. Another one is the Moneymaker, a person for whom money and the security it provides is a big priority. The third is being a People Person, who thrives on building a culture for others to succeed and helping others. Then there is a Power Broker, the person who wants to be at the table and make decisions; being present in the room where decisions are made is a big motivator for them. Then there’s the List Checker, a person who gets motivated by tiny dopamine hits, who needs to “check another thing off the list” to stay motivated. There was the Time Traveler, a kind of person who is so focused on the vision of what the world should be in the future that they have grand ideas and are motivated by accomplishing that mission. The last one was the Hard Driver, someone motivated by showing others they can do it. “Oh, you don’t think I can do it? Yeah, now I will show you.” I think that’s the kind of motivation that also works for a lot of people. And it was so interesting to see that everyone around me, every one of these founders who I thought would be motivated by similar things had a very different, strong primary motivator. I was sitting with people who were motivated by showing other people that they could do it, who had experienced a lot of resistance and hardship in their path leading up to entrepreneurship. That’s something I didn’t have; I always had a very supportive surrounding. So, I never felt like I needed to show anyone that I could do it, but I was sitting next to people who did and for whom this was one of the most potent motivating forces. Obviously, they might also care about making money, but which product to build was not that important. Important to them was to show the people who showed resistance to them that they could do it. I was also sitting next to people whose vision, being a Time Traveler, knowing precisely what they wanted the world to look like after they had built the thing, was the strongest motivator. They didn’t care much about making a lot of money in the process. They knew that they wanted to change a significant part of the world. And that was the motivation that kept them showing up every single day, trying to make small, incremental steps towards it. It was such a strong realization for me to see how motivation is so wildly different, and I reconsidered what I believe I am motivated by. I tried to figure out how this changed over time for me because I think my strongest motivator, at some point, was making money because I was aware that my financials were not very stable for most of my life. And money was obviously the way to stabilize it. So that was my strongest motivator, and it didn’t matter much what I was building at the time or how good the product was as long as I could reliably build financial security. And I noticed that when I reached that in having built and sold FeedbackPanda back in 2019, my motivation to make money became much weaker, and it was supplanted by the motivation to build a better product, build something that I think is a quality product, something that people relish in using that makes their lives easier. Looking at it now, I see myself somewhere between building a great product for great people I want to help as my most significant, strongest motivator. It’s a mix of these archetypes, which is also something that Dr. Sherry Walling said. Obviously, we all have multitudes in us and are motivated by multiple things in different ways. But it was interesting to see that my motivation changed over time. Motivation shifts because our resources shift. Our priorities shift, and the strategies that we have for the challenges that we face shift. That was the first half of the talk, and it was already highly insightful. Within half an hour, my whole perception of “the founder” as an abstract concept changed into something way more nuanced, something way more driven by a kind of “path dependency,” the consequences of the things that happened in our lives that cause us to develop a certain track record of motivation that now drives a lot of our actions. In the second half of the talk, we talked about the things that actually kill motivation and the things that rekindle motivation, which again started the conversation on the table around me. Well, what gets what keeps you from staying motivated? And what do you do to get motivated again? What I realized is that most founders struggle with structuring their work without it being overwhelming. They have a really hard time with pacing. I was talking to an old friend who has the rule that he cannot open his laptop after 9pm because if he does, he will work and keep working until very late, like two or three in the morning. That conflicts with his ability to take his children to daycare. And that’s a problem. It also was a story I commonly heard: people indulge in work, and they forget what time it is, which impacts (and often ruins) the day after. So that inability to pace your work and stop is something that a lot of founders have; it’s a kind of perfectionism where you really want to get it done, you want to finish it up, you don’t want to leave things hanging in the balance. Over an extended period of time, this can crush motivation and drain a lot of energy. So, what’s their way out? Physical movement, apparently. Many people were running, dancing, going on walks with their dogs, or just taking a walk by themselves to reset their minds and their motivational sources. For many founders around my table, physical activity pulled them out of the mental loop of lacking motivation. Physically shifting your perspective in the world by taking a walk and removing yourself from the place where all work happens is a great idea. Make a physical loop around your neighborhood to reset your internal narrative and recuperate your motivational energies. I found it surprising that this talk was the biggest thing for me. At a conference where great sales tactics and marketing funnels are being discussed, I gravitate to the psychological underpinnings of running a calm and reflected operation. What I really take away from MicroConf is the diversity of thoughts, reasoning, and decision-making. Learning about people’s motivation, their willingness to fight their inner demons, and how they fight them has been a spectacular insight from this conference. I can only highly recommend looking into coming to MicroConf next year or this year in Europe, in Dubrovnik, Croatia. It was a great conference with around 220 people this year. MicroConf used to be 350 or so before the pandemic, and it’s now balancing out at 220. I believe a couple more people could come and benefit from what all these incredible founders have to share and learn from each other in the hallway track. I’ve talked to so many founder friends from Twitter, LinkedIn, the Indie Hackers forums, and so many other virtual places. There were even listeners of my podcast and users of PodScan where. I literally, for the very first time, met people who are using my product in real life here at this conference. And I got to hang out with old and new friends and have lovely dinners and lunches full of SaaS talk (and some Warhammer and Magic: The Gathering, too!) I played ping-pong with Cory Haines! It was a lot of fun. If you can make it to the next one, it’ll be fun for you as well. I highly recommend looking into MicroConf Connect, a Slack channel where everybody who comes to the conference hangs out for the rest of the year. This is one of the strongest, most impactful, supportive, and meaningful communities that we have as indie hackers. It’s the only conference that feels like I’m meeting old friends, and they teach me something really, really cool that helps me build a better business. That’s my immediate impression the morning after the last day of MicroConf 2024 in Atlanta, Georgia.
  `,
  });

  for await (const chunk of stream) {
    process.stdout.write(chunk);
  }
}
